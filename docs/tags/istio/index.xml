<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>istio on fatedier blog</title>
    <link>https://blog.fatedier.com/tags/istio/</link>
    <description>Recent content in istio on fatedier blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <copyright>Copyright (c) 2020. All rights reserved.</copyright>
    <lastBuildDate>Tue, 11 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.fatedier.com/tags/istio/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Istio GRPC Gateway 禁用 HTTP1.1 请求</title>
      <link>https://blog.fatedier.com/2022/10/11/istio-grpc-gateway-disable-http1/</link>
      <pubDate>Tue, 11 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2022/10/11/istio-grpc-gateway-disable-http1/</guid>
      <description>&lt;p&gt;有一组专门用于 grpc 请求的 istio-gateway 网关，但是会被通过 HTTP1.1 的请求做漏洞扫描，istio gateway 仍然能够处理，并且会将这个请求转发给后端的服务，后端服务由于协议不匹配，会直接断开连接，istio gateway 就会返回 503。&lt;/p&gt;
&lt;p&gt;这样会误触发告警，并且也会影响观测正常的监控。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Istio 服务请求外部域名持续出错，切换 DNS 后也无法恢复</title>
      <link>https://blog.fatedier.com/2022/01/11/istio-service-send-request-failed-even-dns-switched/</link>
      <pubDate>Tue, 11 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2022/01/11/istio-service-send-request-failed-even-dns-switched/</guid>
      <description>&lt;p&gt;假设 K8s 集群内的服务会以串行的方式不断请求一个外部域名的 80 端口。这个域名通过 DNS 解析到一个固定 IP。当某个时间段，这个 IP 上绑定的服务突然不可用，端口无法访问。内部服务会持续的得到 HTTP 503 的响应。&lt;/p&gt;
&lt;p&gt;此时即使将这个域名的 DNS 切到一个正常的 IP，服务仍然会得到持续的 503 错误，一直无法恢复。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>减少 Istio 控制面下发的配置</title>
      <link>https://blog.fatedier.com/2021/12/24/reduce-istio-control-panel-push-config/</link>
      <pubDate>Fri, 24 Dec 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/12/24/reduce-istio-control-panel-push-config/</guid>
      <description>&lt;p&gt;默认情况下，istiod 会 watch 集群中所有的 namespace，生成对应的配置，实时的通过 xDS 协议，推送给所有实例的 sidecar 容器。&lt;/p&gt;
&lt;p&gt;业务实例会被分发到大量不相关的配置，根本用不到，不仅增加 istiod 分发配置的时效性，也增加了 sidecar 的资源消耗。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>让 Istio sidecar 优雅终止</title>
      <link>https://blog.fatedier.com/2021/12/16/istio-sidecar-graceful-shutdown/</link>
      <pubDate>Thu, 16 Dec 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/12/16/istio-sidecar-graceful-shutdown/</guid>
      <description>&lt;p&gt;在 &lt;a href=&#34;https://blog.fatedier.com/2021/08/26/istio-sidecar-container-start-and-stop-problem/&#34;&gt;Istio sidecar 容器启动停止问题&lt;/a&gt; 这篇文章中，描述了 Istio sidecar 的启动停止顺序的问题，但是实际接入服务的过程中，仍然发现存在一些异常的情况发生，需要进一步的优化。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Istio 1.9 升级 1.10 ExternalAuthorization 失效的问题</title>
      <link>https://blog.fatedier.com/2021/09/02/istio-upgrade-from-1-19-to-1-20-external-authorization-invalid/</link>
      <pubDate>Thu, 02 Sep 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/09/02/istio-upgrade-from-1-19-to-1-20-external-authorization-invalid/</guid>
      <description>&lt;p&gt;近期在将 Istio 1.9.1 升级到 1.10.4。发现原来在 1.9 版本中生效的 ExternalAuthorization 的功能在控制面升级到 1.10，数据面保持在 1.9 版本时，会失效。所有的请求都不需要鉴权就能访问到后端服务。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Istio sidecar 容器启动停止问题</title>
      <link>https://blog.fatedier.com/2021/08/26/istio-sidecar-container-start-and-stop-problem/</link>
      <pubDate>Thu, 26 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/08/26/istio-sidecar-container-start-and-stop-problem/</guid>
      <description>&lt;p&gt;由于引入了 sidecar，会通过 iptables 规则将流量劫持到 sidecar 中的进程。但是 K8s 上并没有精确控制 sidecar 的能力，导致由于 sidecar 与主容器的启停顺序问题会引起一些非预期的行为。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Istio TCP 健康检查无效的问题</title>
      <link>https://blog.fatedier.com/2021/08/24/istio-tcp-health-probe-invalid/</link>
      <pubDate>Tue, 24 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/08/24/istio-tcp-health-probe-invalid/</guid>
      <description>&lt;p&gt;1.9，1.10 的官方文档对这个问题的表述不是很清楚，都没有提到 TCP 的健康检查无效的问题。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Istio 对 Service port name 的要求</title>
      <link>https://blog.fatedier.com/2021/07/29/istio-service-port-name-requirements/</link>
      <pubDate>Thu, 29 Jul 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.fatedier.com/2021/07/29/istio-service-port-name-requirements/</guid>
      <description>&lt;p&gt;由于 Istio 需要在七层解析流量，所以劫持服务流量后需要知道协议类型才能用合适的协议规则来解析。&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
